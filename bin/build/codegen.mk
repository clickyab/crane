tools-codegen:
	$(BUILD) clickyab.com/crane/commands/codegen


octopus-user: tools-codegen
	$(BIN)/codegen -p clickyab.com/crane/crane/models/ad
	$(BIN)/codegen -p clickyab.com/crane/crane/models/campaign
	$(BIN)/codegen -p clickyab.com/crane/crane/models/user
	$(BIN)/codegen -p clickyab.com/crane/crane/models/publisher

codegen: ip2location migration octopus-user stylegen

stylegen:
	$(GO) get -v github.com/kib357/less-go/...
	$(BIN)/lessc -i $(ROOT)/crane/layers/output/native/nativeStyle.less -o $(ROOT)/crane/layers/output/native/nativeStyle.css
	echo "// Code generated by lessc. DO NOT EDIT.\n// Source: crane/layers/output/native/nativeStyle.less\n\npackage native\n\nconst style=\`" > $(ROOT)/crane/layers/output/native/nativeStyle.gen.go
	cat $(ROOT)/crane/layers/output/native/nativeStyle.css >>  $(ROOT)/crane/layers/output/native/nativeStyle.gen.go
	echo "\`" >> $(ROOT)/crane/layers/output/native/nativeStyle.gen.go
	rm $(ROOT)/crane/layers/output/native/nativeStyle.css
