tools-codegen:
	$(BUILD) clickyab.com/crane/commands/codegen


octopus-user: tools-codegen

codegen: ip2location migration octopus-user stylegen

stylegen:
	$(GO) get -v github.com/kib357/less-go/...
	$(BIN)/lessc -i $(ROOT)/crane/layers/output/native/native_style.less -o $(ROOT)/crane/layers/output/native/native_style.css
	echo "// Code generated by lessc. DO NOT EDIT.\n// Source: crane/layers/output/native/native_style.less\n\npackage native\n\nconst style=\`" > $(ROOT)/crane/layers/output/native/native_style.gen.go
	cat $(ROOT)/crane/layers/output/native/native_style.css >>  $(ROOT)/crane/layers/output/native/native_style.gen.go
	echo "\`" >> $(ROOT)/crane/layers/output/native/native_style.gen.go
	rm $(ROOT)/crane/layers/output/native/native_style.css
